var metaData=$("#project-data").data(),projectId=metaData.projectId,projectName=metaData.projectName,projectActive=metaData.projectActive,projectMargin=metaData.projectMargin,projectAdminFee=metaData.projectAdminFee,getProjectProgressItemsUrl=metaData.getProjectProgressItemsUrl,getProjectVariationsUrl=metaData.getProjectVariationsUrl,editProjectUrl=metaData.editProjectUrl,deleteProjectUrl=metaData.deleteProjectUrl;$.fn.editable.defaults.mode="inline",$("#delete_project").on("click",function(){"use strict";swal({title:"Are you sure to delete this project?",text:"You are going to delete project "+projectName,type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",cancelButtonText:"No, cancel plx!",closeOnConfirm:!1,closeOnCancel:!1,customClass:"deleteConfirmation"},function(a){if(!a)return void swal("Cancelled","Your project is safe :)","error");var b=$(".deleteConfirmation").find(".confirm"),c=b.html();b.html('<i class="fa fa-spinner fa-spin"></i> '+c),$.ajax({url:deleteProjectUrl,type:"DELETE",contentType:"application/json; charset=utf-8",dataType:"json"}).done(function(){swal({title:"Nice!",text:"You delete: "+projectName,type:"success"},function(){window.location.href="/"})})})}),$("#archive_project").on("click",function(){"use strict";console.log(projectActive);var a="True"===projectActive?"archive":"unarchive";swal({title:"Are you sure to "+a+" the project?",type:"info",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, "+a+" it!",cancelButtonText:"No, cancel plx!",closeOnConfirm:!1,closeOnCancel:!1,customClass:"archiveConfirmation"},function(b){if(!b)return void swal("Cancelled","The project file is safe :)","error");var c=$(".archiveConfirmation").find(".confirm"),d=c.html();c.html('<i class="fa fa-spinner fa-spin"></i> '+d),c.off("click");var e="True"!==projectActive;$.ajax({url:editProjectUrl,type:"PUT",data:JSON.stringify({active:e}),contentType:"application/json; charset=utf-8",dataType:"json"}).done(function(){swal({title:"Nice!",text:"You "+a+": "+projectName,type:"success"},function(){location.reload()})})})}),$("#btn-add-new-progress-items").on("click",function(){"use strict";var a=$("#new-progress-items-form").parsley();a.validate(),a.isValid()&&swal({title:"Are you sure to add these?",text:"You can edit them later!",type:"warning",showCancelButton:!0,confirmButtonColor:"teal",confirmButtonText:"Yes, add them!",cancelButtonText:"No, cancel plx!",closeOnConfirm:!1,closeOnCancel:!1,customClass:"deleteRowsConfirmation"},function(a){if(!a)return void swal("Cancelled","They are not yet added :)","error");var b=$(".progressItem"),c=new Array(b.length);_.fill(c,null),function a(d){if(d>=b.length)return!0;var e=$(b[d]),f=e.find("textarea").val(),g=accounting.parse(e.find("input").val());$.ajax({url:newProgressItemUrl,type:"POST",data:JSON.stringify({name:f,contract_value:g,project_id:projectId}),contentType:"application/json; charset=utf-8",dataType:"json"}).done(function(){c[d]=!0,a(d+1)}).fail(function(){c[d]=!1})}(0),function a(){c.some(isFalse)?console.log("error"):c.some(isNull)?setTimeout(a,100):c.every(isTrue)&&swal({title:"Nice!",text:"You added all changes",type:"success"},function(){location.reload()})}()})}),$("#btn-save-meta").on("click",function(){"use strict";var a=$("#edit-project-meta-form").parsley();a.validate(),a.isValid()&&swal({title:"Are you sure to save the changes?",text:"You cannot recover them later!",type:"warning",showCancelButton:!0,confirmButtonColor:"teal",confirmButtonText:"Yes, save them!",cancelButtonText:"No, cancel plx!",closeOnConfirm:!1,closeOnCancel:!1,customClass:"saveMetaConfirmation"},function(a){if(!a)return void swal("Cancelled","Your project is safe :)","error");var b=$(".saveMetaConfirmation").find(".confirm"),c=b.html();b.html('<i class="fa fa-spinner fa-spin"></i> '+c);var d=$("#new_name").val(),e=$("#new_margin").val(),f=$("#new_ref_number").val(),g=$("#new_admin_fee").val();""===g&&(g=null),$.ajax({url:editProjectUrl,type:"PUT",data:JSON.stringify({name:d,margin:e,admin_fee:g,reference_number:f}),contentType:"application/json; charset=utf-8",dataType:"json"}).done(function(){swal({title:"Nice!",text:"Save changes",type:"success"},function(){location.reload()})})})});var $table=$("#table");$table.on("editable-save.bs.table",function(){"use strict";$("#btn-save").prop("disabled",!1)}),$table.on("check.bs.table check-all.bs.table check-some.bs.table",function(){"use strict";$("#btn-delete").prop("disabled",!1)}),$table.on("uncheck-all.bs.table",function(){"use strict";$("#btn-delete").prop("disabled",!0)}),$table.on("uncheck.bs.table	uncheck-some.bs.table",function(){"use strict";var a=$table.bootstrapTable("getSelections");0===a.length&&$("#btn-delete").prop("disabled",!0)});
//# sourceMappingURL=project_base.min.js.map