function addProgressItemRow(){"use strict";var a=$('<tr class="progressItem"><td><textarea name="name" class="input-progress-item-name form-control" required></textarea></td><td style="vertical-align: middle;"><input type="text" name="amount" class="input-progress-item-value form-control" required data-parsley-type="number"/></td><td style="width:150px;text-align:center;vertical-align:middle"><a href="javascript:void(0)" class="add-progress-item-row" onclick="addProgressItemRow();"><i class="fa fa-plus"></i> Add</a> / <a href="javascript:void(0)" class="delete-progress-item-row" onclick="deleteProgressItemRow(this);"><i class="fa fa-minus"></i> Delete</a></td></tr>');$("#progressItems").append(a)}function deleteProgressItemRow(a){"use strict";$(a).closest("tr").remove()}function onClickUp(a){"use strict";var b=$(a).closest("tr"),c=b.prev();0!==c.length&&b.after(c),$("#btn-save").prop("disabled",!1)}function onClickDown(a){"use strict";var b=$(a).closest("tr"),c=b.next();0!==c.length&&b.before(c),$("#btn-save").prop("disabled",!1)}function reorderFormatter(a,b,c){"use strict";return'<div style="text-align: middle"><a href="javascript:void(0)" onclick="onClickUp(this);"><i class="fa fa-caret-up"></i> </a><a href="javascript:void(0)" onclick="onClickDown(this);"><i class="fa fa-caret-down"></i> </a></div>'}function paddingFormatterA(a,b,c){"use strict";return a.toFixed(2)}function paddingFormatterB(a,b,c){"use strict";return a.toFixed(2)}function percentageFormatter(a,b,c){"use strict";return(100*a).toFixed(2)+"%"}$.ajax({url:getProjectProgressItemsUrl,type:"GET",contentType:"application/json; charset=utf-8"}).done(function(a){"use strict";$("#table").bootstrapTable({columns:[{checkbox:!0},{field:"name",title:"Name",halign:"center",editable:{type:"text"},sortable:!0},{field:"contract_value",title:"Contract Value",halign:"center",editable:{type:"text"},align:"right",sortable:!0},{field:"completed_value",title:"Completed To Date",halign:"center",editable:{type:"text"},align:"right",sortable:!0},{field:"percentage",title:"%",halign:"center",sortable:!0,formatter:"percentageFormatter",align:"right",valign:"center",width:"100px"}],data:a.progress_items,rowStyle:"rowStyle",toolbar:"#toolbar"})}),$.fn.editable.defaults.mode="inline",$("#btn-delete").on("click",function(){"use strict";swal({title:"Are you sure to delete selected rows?",text:"You cannot recover them later!",type:"warning",showCancelButton:!0,confirmButtonColor:"teal",confirmButtonText:"Yes, save them!",cancelButtonText:"No, cancel plx!",closeOnConfirm:!1,closeOnCancel:!1,customClass:"deleteRowsConfirmation"},function(a){function b(a){if(a>=c.length)return!0;var d=!0;return $.ajax({url:"/api/v1.0/progress_items/"+c[a].id,type:"DELETE",contentType:"application/json; charset=utf-8",dataType:"json"}).done(function(){d=b(a+1)}).fail(function(){d=!1}),d}if(!a)return void swal("Cancelled","Your project is safe :)","error");var c=$table.bootstrapTable("getSelections");b(0)&&swal({title:"Nice!",text:"Delete variations",type:"success"},function(){location.reload()})})}),$("#btn-save").on("click",function(){"use strict";swal({title:"Are you sure to save all the changes?",type:"info",showCancelButton:!0,confirmButtonColor:"teal",confirmButtonText:"Yes, save them!",cancelButtonText:"No, cancel plx!",closeOnConfirm:!1,closeOnCancel:!1,customClass:"saveVariationsConfirmation"},function(a){if(!a)return void swal("Cancelled","Your saves are unsaved","error");for(var b=$table.bootstrapTable("getData"),c=new Array(b.length),d=0;d<c.length;d+=1)c[d]=null;!function a(d){if(!(d>=b.length)){var e=b[d],f=e.id,g=e.name,h=e.contract_value,i=e.completed_value;$.ajax({url:"/api/v1.0/progress_items/"+f,type:"PUT",data:JSON.stringify({name:g,contract_value:h,completed_value:i}),contentType:"application/json; charset=utf-8",dataType:"json"}).done(function(){c[d]=!0,a(d+1)}).fail(function(){c[d]=!1})}}(0),function a(){c.some(isFalse)||(c.some(isNull)?setTimeout(a,100):c.every(isTrue)&&swal({title:"Nice!",text:"You saved all changes.",type:"success"},function(){location.reload()}))}()})});
//# sourceMappingURL=progress.min.js.map